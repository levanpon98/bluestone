{"ast":null,"code":"import { message } from 'antd';\n\nconst mail = require('@sendgrid/mail');\n\nmail.setApiKey(process.env.SENDGRID_API_KEY);\nexport default (async (req, res) => {\n  const body = JSON.parse(req.body);\n  const message = `\n        Name: ${body.name}\\r\\n\n        Email: ${body.email}\\r\\n\n        Message: ${body.message}\n    `;\n  const data = {\n    to: \"levanpon1998@gmail.com\",\n    from: \"levanpon1009@gmail.com\",\n    cc: \"levanpon1009@gmail.com\",\n    subject: body.subject,\n    text: message,\n    html: message.replace(/\\r\\n/g, '<br>')\n  };\n\n  try {\n    await mail.send(data);\n    res.status(200).json({\n      status: \"OK\"\n    });\n  } catch (error) {\n    console.error(error);\n\n    if (error.response) {\n      console.error(error.response.body);\n    }\n  }\n});","map":{"version":3,"sources":["/home/ponlv/work/projects/hmsp/bluestone/pages/api/mail.jsx"],"names":["message","mail","require","setApiKey","process","env","SENDGRID_API_KEY","req","res","body","JSON","parse","name","email","data","to","from","cc","subject","text","html","replace","send","status","json","error","console","response"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;;AAEA,MAAMC,IAAI,GAAGC,OAAO,CAAC,gBAAD,CAApB;;AAEAD,IAAI,CAACE,SAAL,CAAeC,OAAO,CAACC,GAAR,CAAYC,gBAA3B;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,GAAG,CAACE,IAAf,CAAb;AAEA,QAAMT,OAAO,GAAI;AACrB,gBAAgBS,IAAI,CAACG,IAAK;AAC1B,iBAAiBH,IAAI,CAACI,KAAM;AAC5B,mBAAmBJ,IAAI,CAACT,OAAQ;AAChC,KAJI;AAMA,QAAMc,IAAI,GAAG;AACTC,IAAAA,EAAE,EAAE,wBADK;AAETC,IAAAA,IAAI,EAAE,wBAFG;AAGTC,IAAAA,EAAE,EAAE,wBAHK;AAITC,IAAAA,OAAO,EAAET,IAAI,CAACS,OAJL;AAKTC,IAAAA,IAAI,EAAEnB,OALG;AAMToB,IAAAA,IAAI,EAAEpB,OAAO,CAACqB,OAAR,CAAgB,OAAhB,EAAyB,MAAzB;AANG,GAAb;;AAQA,MAAI;AACA,UAAMpB,IAAI,CAACqB,IAAL,CAAUR,IAAV,CAAN;AACAN,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,MAAAA,MAAM,EAAE;AAAV,KAArB;AACH,GAHD,CAGE,OAAOE,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;;AACA,QAAIA,KAAK,CAACE,QAAV,EAAoB;AAChBD,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAK,CAACE,QAAN,CAAelB,IAA7B;AACH;AACJ;AAEJ,CA3BD","sourcesContent":["import { message } from 'antd'\n\nconst mail = require('@sendgrid/mail')\n\nmail.setApiKey(process.env.SENDGRID_API_KEY)\n\nexport default async (req, res) => {\n    const body = JSON.parse(req.body)\n\n    const message = `\n        Name: ${body.name}\\r\\n\n        Email: ${body.email}\\r\\n\n        Message: ${body.message}\n    `\n\n    const data = {\n        to: \"levanpon1998@gmail.com\",\n        from: \"levanpon1009@gmail.com\",\n        cc: \"levanpon1009@gmail.com\",\n        subject: body.subject,\n        text: message,\n        html: message.replace(/\\r\\n/g, '<br>')\n    }\n    try {\n        await mail.send(data)\n        res.status(200).json({ status: \"OK\" })\n    } catch (error) {\n        console.error(error);\n        if (error.response) {\n            console.error(error.response.body)\n        }\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}