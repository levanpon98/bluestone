{"ast":null,"code":"import { message } from 'antd';\nimport { notification } from 'antd';\n\nconst modalNotification = (type, message, desc) => {\n  notification[type]({\n    message: message,\n    description: desc,\n    duration: 3\n  });\n};\n\nconst mail = require('@sendgrid/mail');\n\nmail.setApiKey(process.env.SENDGRID_API_KEY);\nexport default (async (req, res) => {\n  const body = JSON.parse(req.body);\n  const message = `\n        Name: ${body.name}\\r\\n\n        Email: ${body.email}\\r\\n\n        Message: ${body.message}\n    `;\n  const data = {\n    to: body.email,\n    from: process.env.CUSTOMER_EMAIL,\n    cc: process.env.CUSTOMER_EMAIL,\n    subject: body.subject,\n    text: message,\n    html: message.replace(/\\r\\n/g, '<br>')\n  };\n\n  try {\n    await mail.send(data);\n    res.status(200).json({\n      status: \"OK\"\n    });\n    modalNotification('success', \"Thank you!!\", \"We recived you massage\");\n  } catch (error) {\n    modalNotification('error', \"Oppp!!\", \"Sorry!! Something is wrong\");\n  }\n});","map":{"version":3,"sources":["/home/ponlv/work/projects/hmsp/bluestone/pages/api/mail.jsx"],"names":["message","notification","modalNotification","type","desc","description","duration","mail","require","setApiKey","process","env","SENDGRID_API_KEY","req","res","body","JSON","parse","name","email","data","to","from","CUSTOMER_EMAIL","cc","subject","text","html","replace","send","status","json","error"],"mappings":"AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,SAASC,YAAT,QAA6B,MAA7B;;AAEA,MAAMC,iBAAiB,GAAG,CAACC,IAAD,EAAOH,OAAP,EAAgBI,IAAhB,KAAyB;AAC/CH,EAAAA,YAAY,CAACE,IAAD,CAAZ,CAAmB;AACfH,IAAAA,OAAO,EAAEA,OADM;AAEfK,IAAAA,WAAW,EAAED,IAFE;AAGfE,IAAAA,QAAQ,EAAE;AAHK,GAAnB;AAKH,CAND;;AAQA,MAAMC,IAAI,GAAGC,OAAO,CAAC,gBAAD,CAApB;;AAEAD,IAAI,CAACE,SAAL,CAAeC,OAAO,CAACC,GAAR,CAAYC,gBAA3B;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,GAAG,CAACE,IAAf,CAAb;AAEA,QAAMf,OAAO,GAAI;AACrB,gBAAgBe,IAAI,CAACG,IAAK;AAC1B,iBAAiBH,IAAI,CAACI,KAAM;AAC5B,mBAAmBJ,IAAI,CAACf,OAAQ;AAChC,KAJI;AAMA,QAAMoB,IAAI,GAAG;AACTC,IAAAA,EAAE,EAAEN,IAAI,CAACI,KADA;AAETG,IAAAA,IAAI,EAAEZ,OAAO,CAACC,GAAR,CAAYY,cAFT;AAGTC,IAAAA,EAAE,EAAEd,OAAO,CAACC,GAAR,CAAYY,cAHP;AAITE,IAAAA,OAAO,EAAEV,IAAI,CAACU,OAJL;AAKTC,IAAAA,IAAI,EAAE1B,OALG;AAMT2B,IAAAA,IAAI,EAAE3B,OAAO,CAAC4B,OAAR,CAAgB,OAAhB,EAAyB,MAAzB;AANG,GAAb;;AASA,MAAI;AACA,UAAMrB,IAAI,CAACsB,IAAL,CAAUT,IAAV,CAAN;AACAN,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAED,MAAAA,MAAM,EAAE;AAAV,KAArB;AACA5B,IAAAA,iBAAiB,CAAC,SAAD,EAAY,aAAZ,EAA2B,wBAA3B,CAAjB;AACH,GAJD,CAIE,OAAO8B,KAAP,EAAc;AACZ9B,IAAAA,iBAAiB,CAAC,OAAD,EAAU,QAAV,EAAoB,4BAApB,CAAjB;AACH;AAEJ,CA1BD","sourcesContent":["import { message } from 'antd'\nimport { notification } from 'antd';\n\nconst modalNotification = (type, message, desc) => {\n    notification[type]({\n        message: message,\n        description: desc,\n        duration: 3,\n    });\n};\n\nconst mail = require('@sendgrid/mail')\n\nmail.setApiKey(process.env.SENDGRID_API_KEY)\n\nexport default async (req, res) => {\n    const body = JSON.parse(req.body)\n\n    const message = `\n        Name: ${body.name}\\r\\n\n        Email: ${body.email}\\r\\n\n        Message: ${body.message}\n    `\n\n    const data = {\n        to: body.email,\n        from: process.env.CUSTOMER_EMAIL,\n        cc: process.env.CUSTOMER_EMAIL,\n        subject: body.subject,\n        text: message,\n        html: message.replace(/\\r\\n/g, '<br>')\n    }\n\n    try {\n        await mail.send(data)\n        res.status(200).json({ status: \"OK\" })\n        modalNotification('success', \"Thank you!!\", \"We recived you massage\")\n    } catch (error) {\n        modalNotification('error', \"Oppp!!\", \"Sorry!! Something is wrong\")\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}