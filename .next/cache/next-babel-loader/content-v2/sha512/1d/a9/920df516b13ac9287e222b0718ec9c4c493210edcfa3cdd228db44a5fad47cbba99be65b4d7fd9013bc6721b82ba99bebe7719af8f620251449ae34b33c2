{"ast":null,"code":"// src/authenticate\nimport cookie from 'js-cookie';\nimport redirect from './Redirect';\n\nvar getCookieFromBrowser = function getCookieFromBrowser(key) {\n  cookie.get(key);\n};\n\nvar getCookieFromServer = function getCookieFromServer(key, req) {\n  if (!req.headers.cookie) {\n    return undefined;\n  }\n\n  var rawCookie = req.headers.cookie.split(';').find(function (c) {\n    return c.trim().startsWith(\"\".concat(key, \"=\"));\n  });\n\n  if (!rawCookie) {\n    return undefined;\n  }\n\n  return rawCookie.split('=')[1];\n};\n\nexport var getCookie = function getCookie(key, req) {\n  return true ? getCookieFromBrowser(key) : getCookieFromServer(key, req);\n};\nexport var checkJwt = function checkJwt(ctx) {\n  var jwt = getCookie('jwt', ctx.req);\n  return !!jwt;\n};\nexport var isAuthenticated = function isAuthenticated(ctx) {\n  if (checkJwt(ctx)) {\n    return true;\n  }\n\n  return false;\n};","map":{"version":3,"sources":["/home/ponlv/work/projects/hmsp/bluestone/components/shared/authenticate/Authenticate.jsx"],"names":["cookie","redirect","getCookieFromBrowser","key","get","getCookieFromServer","req","headers","undefined","rawCookie","split","find","c","trim","startsWith","getCookie","checkJwt","ctx","jwt","isAuthenticated"],"mappings":"AAAA;AAEA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAOC,QAAP,MAAqB,YAArB;;AAEA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,GAAG,EAAI;AAClCH,EAAAA,MAAM,CAACI,GAAP,CAAWD,GAAX;AACD,CAFD;;AAIA,IAAME,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACF,GAAD,EAAMG,GAAN,EAAc;AACxC,MAAI,CAACA,GAAG,CAACC,OAAJ,CAAYP,MAAjB,EAAyB;AACvB,WAAOQ,SAAP;AACD;;AAED,MAAMC,SAAS,GAAGH,GAAG,CAACC,OAAJ,CAAYP,MAAZ,CACfU,KADe,CACT,GADS,EAEfC,IAFe,CAEV,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,IAAF,GAASC,UAAT,WAAuBX,GAAvB,OAAJ;AAAA,GAFS,CAAlB;;AAGA,MAAI,CAACM,SAAL,EAAgB;AACd,WAAOD,SAAP;AACD;;AACD,SAAOC,SAAS,CAACC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAP;AACD,CAZD;;AAcA,OAAO,IAAMK,SAAS,GAAG,SAAZA,SAAY,CAACZ,GAAD,EAAMG,GAAN;AAAA,SACvB,OACIJ,oBAAoB,CAACC,GAAD,CADxB,GAEIE,mBAAmB,CAACF,GAAD,EAAMG,GAAN,CAHA;AAAA,CAAlB;AAMP,OAAO,IAAMU,QAAQ,GAAG,SAAXA,QAAW,CAAAC,GAAG,EAAI;AAC7B,MAAMC,GAAG,GAAGH,SAAS,CAAC,KAAD,EAAQE,GAAG,CAACX,GAAZ,CAArB;AACA,SAAO,CAAC,CAACY,GAAT;AACD,CAHM;AAKP,OAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACF,GAAD,EAAS;AAEtC,MAAID,QAAQ,CAACC,GAAD,CAAZ,EAAmB;AACjB,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD,CANM","sourcesContent":["// src/authenticate\n\nimport cookie from 'js-cookie';\nimport redirect from './Redirect';\n\nconst getCookieFromBrowser = key => {\n  cookie.get(key)\n};\n\nconst getCookieFromServer = (key, req) => {\n  if (!req.headers.cookie) {\n    return undefined;\n  }\n\n  const rawCookie = req.headers.cookie\n    .split(';')\n    .find(c => c.trim().startsWith(`${key}=`));\n  if (!rawCookie) {\n    return undefined;\n  }\n  return rawCookie.split('=')[1];\n};\n\nexport const getCookie = (key, req) => (\n  process.browser\n    ? getCookieFromBrowser(key)\n    : getCookieFromServer(key, req)\n);\n\nexport const checkJwt = ctx => {\n  const jwt = getCookie('jwt', ctx.req)\n  return !!jwt\n};\n\nexport const isAuthenticated = (ctx) => {\n  \n  if (checkJwt(ctx)) {\n    return true;\n  }\n  return false;\n};\n\n\n"]},"metadata":{},"sourceType":"module"}